#notice= notice

.button-bar.clearfix
  .pull-left{ style: 'margin-right: 10px'}
    = link_to user_trainings_path(@training.user), :class => 'btn'  do
      .i.icon-arrow-left
      Back to the trainings

  - if can? :manage_trainings, @training.user
    .btn-group.pull-left
      -# = link_to edit_training_path(@training), :class => 'btn btn-info' do
      -#   .i.icon-check
      -#   Mark as complete
      = link_to edit_training_path(@training), :class => 'btn' do
        .i.icon-edit
        Edit
      = link_to training_path(@training), :class => 'btn', :method => :delete, :confirm => 'Are you sure?'  do
        .i.icon-trash
        Delete

%hr

%h2= @training.title

%hr


.row
  .span8
    %h4 Notes
    %br
    .well
      = @training.notes

  .span4
    %table.table.table-bordered
      %tr
        %th Date
        %td= l @training.started_at, :format => :day
      %tr
        %th Feeling
        %td= @training.feeling
      %tr
        %th Temperature
        %td= @training.temperature
      %tr
        %th Weather
        %td= @training.weather
      %tr
        %th Surface
        %td= @training.surface

%table.table.table-striped.exercise-table{:'data-training-id' => @training.id}
  %thead
    %tr
      %th{:width => '30%'} 
        Exercise name
      %th{:width => '30%'} 
        Distance
      %th{:width => '30%'} 
        Time
      %th{:width => '3%'}      
  %tbody
    - @training.exercises.each do |exercise|
      %tr{:'data-exercise-id' => exercise.id}
        %td.exercise-name= exercise.name
        %td.exercise-distance= exercise.distance
        %td.exercise-time= exercise.formatted_time
        %td
          - if can? :manage_trainings, @training.user
            = link_to training_exercise_path(@training, exercise), :method => :delete, :confirm => 'Are you sure?', :class => 'btn btn-mini' do
              %i.icon-trash

- if can? :manage_trainings, @training.user
  %table.table
    %tr.exercise-form-row
      = form_for([@training, @training.exercises.build]) do |f|
        %td{:width => '30%'}
          = f.text_field :name
        %td{:width => '30%'}
          = f.text_field :distance
        %td{:width => '30%'}
          = f.select(:hours, (0..5).map {|p| [ p, p ] }, {}, {:style => 'width: 55px'})
          = f.select(:minutes, (0..59).map {|p| [ ("%02d" % p), p ] }, {}, {:style => 'width: 55px'})
          = f.select(:seconds, (0..59).map {|p| [ ("%02d" % p), p ] }, {}, {:style => 'width: 55px'})
        %td{:width => '3%'}
          = f.button :class => 'btn btn-success' do
            .i.icon-plus
            Add
            

  